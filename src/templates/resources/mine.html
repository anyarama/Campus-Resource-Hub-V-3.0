{% extends 'layout.html' %}
{% block title %}My listings{% endblock %}
{% block page_heading %}My listings{% endblock %}
{% block content %}
<div class="d-flex justify-content-between mb-3">
    <div>
        <p class="text-muted mb-0">Manage drafts and published spaces here.</p>
    </div>
    {% if current_user.role in ['staff', 'admin'] %}
    <a href="{{ url_for('resource.create') }}" class="btn btn-primary-solid">Create listing</a>
    {% endif %}
</div>
<div class="resource-grid">
    {% for resource in resources %}
    <article class="resource-card">
        <div class="d-flex justify-content-between align-items-center">
            <h3 class="h5 mb-0">{{ resource.title }}</h3>
            <span class="badge bg-{% if resource.status=='published' %}success{% elif resource.status=='draft' %}secondary{% else %}dark{% endif %}">{{ resource.status|title }}</span>
        </div>
        <p class="text-muted mt-2">{{ resource.summary[:140] }}&hellip;</p>
        <ul class="list-unstyled small text-muted mb-3">
            <li><strong>Location:</strong> {{ resource.location }}</li>
            <li><strong>Capacity:</strong> {{ resource.capacity }}</li>
        </ul>
        <div class="resource-footer d-flex gap-2">
            <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('resource.edit', resource_id=resource.resource_id) }}">Edit</a>
            <a class="btn btn-link btn-sm" href="{{ url_for('resource.detail', resource_id=resource.resource_id) }}">Preview</a>
        </div>
    </article>
    {% else %}
    <p>You have not created any listings yet.</p>
    {% endfor %}
</div>
{% endblock %}
